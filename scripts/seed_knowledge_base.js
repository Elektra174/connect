/**
 * CONNECTUM PRO v21.28.5 - THE GOLDEN 300 LIBRARY (MPT MONOLITH)
 * =========================================================================
 * üöÄ –ó–ê–î–ê–ß–ê: –ü—Ä–æ—à–∏–≤–∫–∞ —ç—Ç–∞–ª–æ–Ω–Ω–æ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π RAG (300+ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π).
 * üß† –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø: –ú–µ—Ç–∞-–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –¢–µ—Ä–∞–ø–∏—è (–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–æ–ª—ã–Ω—Å–∫–∏–π).
 * üõ°Ô∏è LOGIC: –ì–ª—É–±–æ–∫–∞—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ "–∞—Ç–æ–º—ã" —Ç–µ—Ä–∞–ø–∏–∏: [–¢—Ä–∏–≥–≥–µ—Ä -> –ò–Ω—Ç–µ—Ä–≤–µ–Ω—Ü–∏—è].
 * =========================================================================
 */

const path = require('path');
require('dotenv').config({ path: path.resolve(__dirname, '../.env') });

const { createClient } = require('@supabase/supabase-js');
const axios = require('axios');
const winston = require('winston');

const logger = winston.createLogger({
    level: 'info',
    format: winston.format.combine(winston.format.timestamp(), winston.format.json()),
    transports: [
        new winston.transports.File({ filename: 'logs/seed_platinum.log' }),
        new winston.transports.Console({
            format: winston.format.combine(winston.format.colorize(), winston.format.simple())
        })
    ],
});

const YANDEX_API_KEY = process.env.YANDEX_API_KEY;
const FOLDER_ID = process.env.FOLDER_ID || process.env.YANDEX_FOLDER_ID;
const SUPABASE_URL = process.env.SUPABASE_URL;
const SUPABASE_KEY = process.env.SUPABASE_KEY;

if (!YANDEX_API_KEY || !FOLDER_ID || !SUPABASE_URL || !SUPABASE_KEY) {
    console.error("‚ùå –û—à–∏–±–∫–∞: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è!");
    process.exit(1);
}

const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

/**
 * üìö –£–õ–¨–¢–ò–ú–ê–¢–ò–í–ù–´–ô –†–ï–ï–°–¢–† –ó–ù–ê–ù–ò–ô –ú–ü–¢ (300+ –ï–î–ò–ù–ò–¶)
 * –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ "–ö–æ–Ω—Ç–µ–∫—Å—Ç—É –±–æ–ª–∏" –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.
 */
const KNOWLEDGE_DATA = [
    // --- 1. –î–ï–ù–¨–ì–ò –ò –°–ê–ú–û–¶–ï–ù–ù–û–°–¢–¨ (–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è) ---
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ—é—Å—å –Ω–∞–∑—ã–≤–∞—Ç—å –≤—ã—Å–æ–∫—É—é —Ü–µ–Ω—É"', text: '–ï—Å–ª–∏ —Ç—ã –ø—Ä–æ–¥–∞–µ—à—å –Ω–µ –≤—Ä–µ–º—è, –∞ –∏—Ö –Ω–æ–≤—É—é –∂–∏–∑–Ω—å, —Å–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ? –ü–æ—á—É–≤—Å—Ç–≤—É–π –≤–µ—Å —ç—Ç–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —Ä—É–∫–∞—Ö.', marker: '–¶–µ–Ω–Ω–æ—Å—Ç—å vs –í—Ä–µ–º—è' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–î–µ–Ω—å–≥–∏ ‚Äî —ç—Ç–æ –æ–ø–∞—Å–Ω–æ/–≥—Ä—è–∑–Ω–æ"', text: '–°—Ç–∞–Ω—å —ç–Ω–µ—Ä–≥–∏–µ–π —ç—Ç–∏—Ö –±–æ–ª—å—à–∏—Ö –¥–µ–Ω–µ–≥. –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å. –ß—É–≤—Å—Ç–≤—É–µ—à—å –ª–∏ —Ç—ã —Å–µ–±—è –≥—Ä—è–∑–Ω—ã–º –∏–ª–∏ –æ–ø–∞—Å–Ω—ã–º, –±—É–¥—É—á–∏ —ç—Ç–æ–π —Å–∏–ª–æ–π?', marker: '–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ä–µ—Å—É—Ä—Å–æ–º' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–£–ø–µ—Ä—Å—è –≤ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –ø–æ—Ç–æ–ª–æ–∫"', text: '–û—Ç –∫–∞–∫–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ç–µ–±—è –±–µ—Ä–µ–∂–µ—Ç —ç—Ç–æ—Ç –ø–æ—Ç–æ–ª–æ–∫? –ß—Ç–æ —É–∂–∞—Å–Ω–æ–≥–æ —Å–ª—É—á–∏—Ç—Å—è, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ —Å—Ç–∞–Ω–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?', marker: '–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ú–Ω–µ —Å—Ç—ã–¥–Ω–æ –±—Ä–∞—Ç—å –¥–µ–Ω—å–≥–∏ –∑–∞ –ø–æ–º–æ—â—å"', text: '–ï—Å–ª–∏ —Ç—ã ‚Äî —Å–∞–º–æ –ò–∑–æ–±–∏–ª–∏–µ, –∂–∞–ª–∫–æ –ª–∏ —Ç–µ–±–µ —Ç–µ—á—å —á–µ—Ä–µ–∑ —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞? –†–∞–∑–≤–µ –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –æ–±–µ–¥–Ω–µ—Ç—å –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –æ–Ω —Ç–µ—á–µ—Ç?', marker: '–°–Ω—è—Ç–∏–µ –¥–µ—Ñ–∏—Ü–∏—Ç–∞—Ä–Ω–æ—Å—Ç–∏' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –¥–æ–ª–∂–µ–Ω –º–Ω–æ–≥–æ –ø–∞—Ö–∞—Ç—å, —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å"', text: '–†–∞–¥–∏ —á–µ–≥–æ —Ç—ã –∑–∞–ø—Ä–µ—â–∞–µ—à—å —Å–µ–±–µ –ø–æ–ª—É—á–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ –ª–µ–≥–∫–æ? –ö–æ–º—É —Ç—ã –¥–æ–∫–∞–∑—ã–≤–∞–µ—à—å —Å–≤–æ—é "—Ö–æ—Ä–æ—à–µ—Å—Ç—å" —á–µ—Ä–µ–∑ –º—É—á–µ–Ω–∏—è?', marker: '–†–∞–∑—Ä—É—à–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –±–æ—Ä—å–±—ã' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ—é—Å—å, —á—Ç–æ –¥–µ–Ω—å–≥–∏ –º–µ–Ω—è –∏—Å–ø–æ—Ä—Ç—è—Ç"', text: '–°—Ç–∞–Ω—å —Ç–µ–º "–∏—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–º" –±–æ–≥–∞—á–æ–º. –ö–∞–∫–∞—è —Å–≤–æ–±–æ–¥–∞ –≤ –Ω–µ–º –µ—Å—Ç—å, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Å–µ–±–µ —Å–µ–π—á–∞—Å –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–∞–µ—à—å?', marker: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ–Ω–∏' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –Ω–µ –∑–Ω–∞—é, –≥–¥–µ –≤–∑—è—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤"', text: '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç—ã ‚Äî —ç—Ç–æ —Ç—ã. –ö–∞–∫ –±—ã —Ç—ã —Ö–æ—Ç–µ–ª, —á—Ç–æ–±—ã —Ç–µ–±—è –Ω–∞—à–ª–∏? –ö–∞–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ç—ã –∫–∞–∫ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å –Ω–∞–≤—Å—Ç—Ä–µ—á—É –º–∞—Å—Ç–µ—Ä—É?', marker: '–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ—é—Å—å –∫—Ä–∏—Ç–∏–∫–∏ –∫–æ–ª–ª–µ–≥-—ç–∫—Å–ø–µ—Ä—Ç–æ–≤"', text: '–°—Ç–∞–Ω—å —ç—Ç–∏–º –ö—Ä–∏—Ç–∏–∫–æ–º. –û—Ç–∫—É–¥–∞ —É —Ç–µ–±—è —Å—Ç–æ–ª—å–∫–æ –≤–ª–∞—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –¥—Ä—É–≥–∏–º–∏? –ö–∞–∫—É—é —Å–≤–æ—é –∂–∏–∑–Ω—å —Ç—ã —Å–µ–π—á–∞—Å –Ω–µ –∂–∏–≤–µ—à—å?', marker: '–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –∞–≥—Ä–µ—Å—Å–∏–∏ –∫—Ä–∏—Ç–∏–∫–∞' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø —Å–∞–º–æ–∑–≤–∞–Ω–µ—Ü, –º–Ω–µ –µ—â–µ –Ω–∞–¥–æ –ø–æ—É—á–∏—Ç—å—Å—è"', text: '–¢—ã —É—á–∏—à—å—Å—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —á–µ–≥–æ? –°—Ç–∞–Ω—å —ç—Ç–∏–º —Å—Ç—Ä–∞—Ö–æ–º –æ—à–∏–±–∫–∏. –ë–æ–∏—Ç—Å—è –ª–∏ –æ—à–∏–±–∫–∞ —Å–∞–º—É —Å–µ–±—è? –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —ç—Ç–æ –µ—ë –≥–ª–∞–∑–∞–º–∏.', marker: '–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –∏–∑–±–µ–≥–∞–Ω–∏—è' },
    { mod: 'mpt', cat: '–î–µ–Ω—å–≥–∏', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ñ–∞–ª–∫–æ —Ç—Ä–∞—Ç–∏—Ç—å –¥–µ–Ω—å–≥–∏ –Ω–∞ —Å–≤–æ–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è"', text: '–ï—Å–ª–∏ —Ç—ã ‚Äî –ò—Å—Ç–æ—á–Ω–∏–∫, —Ä–∞–∑–≤–µ –ò—Å—Ç–æ—á–Ω–∏–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å–æ—Ö–Ω—É—Ç—å –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –ø–æ–∏—Ç —Å–∞–º —Å–µ–±—è? –ü–æ–∑–≤–æ–ª—å –≤–æ–¥–µ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞—Å—Å–µ–π–Ω.', marker: '–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ—Ñ–∏—Ü–∏—Ç' },

    // --- 2. –û–¢–ù–û–®–ï–ù–ò–Ø (–°–ª–∏—è–Ω–∏–µ, –≥—Ä–∞–Ω–∏—Ü—ã, –ø—Ä–æ–µ–∫—Ü–∏–∏) ---
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ú–µ–Ω—è –±–µ—Å–∏—Ç –ø–∞—Ä—Ç–Ω–µ—Ä (–µ–≥–æ –Ω–∞–≥–ª–æ—Å—Ç—å)"', text: '–°—Ç–∞–Ω—å —ç—Ç–æ–π –ù–∞–≥–ª–æ—Å—Ç—å—é. –ü—Ä—è–º–æ —Å–µ–π—á–∞—Å. –í —á–µ–º —Ç–≤–æ–π —Ä–µ—Å—É—Ä—Å –≤ —ç—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–µ? –ö–∞–∫ —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ç–µ–±–µ –≤—ã–∂–∏–≤–∞—Ç—å?', marker: '–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Ç–µ–Ω–∏' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –±–æ—é—Å—å, —á—Ç–æ –º–µ–Ω—è –±—Ä–æ—Å—è—Ç"', text: '–ö–∞–∫–æ–π —Å–≤–æ–π —Ä–µ—Å—É—Ä—Å —Ç—ã –æ—Ç–¥–∞–ª –µ–º—É –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ? (–ù–∞–ø—Ä. –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å). –ó–∞–±–µ—Ä–∏ –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å–≤–æ–µ —Ç–µ–ª–æ, –ø—Ä—è–º–æ –≤ —Ü–µ–Ω—Ç—Ä –≥—Ä—É–¥–∏.', marker: '–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ü–∏–∏ —Å–∏–ª—ã' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –¥–æ–ª–∂–µ–Ω –≤—Å–µ—Ö —Å–ø–∞—Å–∞—Ç—å/–ø–æ–º–æ–≥–∞—Ç—å"', text: '–ó–∞—á–µ–º —Ç–µ–±–µ –∏—Ö —Å–ø–∞—Å–∞—Ç—å? –ö–∞–∫–∏–º —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å, –∫–æ–≥–¥–∞ —Å–ø–∞—Å–∞–µ—à—å? –°—Ç–∞–Ω—å —ç—Ç–æ–π –ó–Ω–∞—á–∏–º–æ—Å—Ç—å—é –Ω–∞–ø—Ä—è–º—É—é, –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤.', marker: '–í—ã—Ö–æ–¥ –∏–∑ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ú–∞–º–∞ –º–µ–Ω—è –±–µ—Å–∏—Ç —Å–≤–æ–∏–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏"', text: '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —Ç—ã ‚Äî –°–∫–∞–ª–∞. –ú–æ–≥—É—Ç –ª–∏ –º–∞–º–∏–Ω—ã —Å–ª–æ–≤–∞ (–≤–µ—Ç–µ—Ä) —Ä–∞–∑—Ä—É—à–∏—Ç—å —Å–∫–∞–ª—É? –ü–æ—á—É–≤—Å—Ç–≤—É–π —Å–≤–æ—é –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –∏ –Ω–µ–ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç—å.', marker: '–°–µ–ø–∞—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –Ω–µ –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å –ù–ï–¢"', text: '–ï—Å–ª–∏ —Ç—ã –±—É–¥–µ—à—å "–ø–ª–æ—Ö–∏–º" –∏ –Ω–µ—É–¥–æ–±–Ω—ã–º, –∫–∞–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è –≤ —Ç–µ–±–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è? –ü–æ–∫–∞–∂–∏ —Ç–µ–ª–æ–º —ç—Ç–æ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî –∫–∞–∫ —Ç—ã –æ—Ç–æ–¥–≤–∏–≥–∞–µ—à—å –ª–∏—à–Ω–µ–µ.', marker: '–õ–µ–≥–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥—Ä–µ—Å—Å–∏–∏' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ú–µ–Ω—è –Ω–µ –ø–æ–Ω–∏–º–∞—é—Ç –∏ –Ω–µ —Å–ª—ã—à–∞—Ç"', text: '–ö–∞–∫—É—é —á–∞—Å—Ç—å —Å–µ–±—è —Ç—ã —Å–∞–º —Å–µ–π—á–∞—Å –Ω–µ —Ö–æ—á–µ—à—å —Å–ª—ã—à–∞—Ç—å? –û —á–µ–º –æ–Ω–∞ –∫—Ä–∏—á–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Ç–≤–æ–µ–≥–æ —Å–∏–º–ø—Ç–æ–º–∞?', marker: '–ó–µ—Ä–∫–∞–ª–æ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–°–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –Ω–µ –º–æ–≥—É –±–µ–∑ –Ω–µ–≥–æ –∂–∏—Ç—å"', text: '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ –æ–Ω ‚Äî —ç—Ç–æ —Ç—ã. –ö–∞–∫–æ–π —Å–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ç—ã –≤–∏–¥–∏—à—å –≤ –Ω–µ–º, –Ω–æ —Å—á–∏—Ç–∞–µ—à—å –¥–ª—è —Å–µ–±—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º?', marker: '–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–û–±–∏–¥–∞ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∑–∞ –¥–µ—Ç—Å—Ç–≤–æ"', text: '–ß–µ–≥–æ —Ç–µ–±–µ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ —Ç–æ–≥–¥–∞? –°—Ç–∞–Ω—å —ç—Ç–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º (–Ω–∞–ø—Ä. –ó–∞—â–∏—Ç–æ–π) –∏ –¥–∞–π –µ–≥–æ —Ç–æ–º—É —Ä–µ–±–µ–Ω–∫—É –≤–Ω—É—Ç—Ä–∏. –¢—ã –≤—Å—ë –µ—â–µ –∑–∞–≤–∏—Å–∏—à—å –æ—Ç –∏—Ö –º–Ω–µ–Ω–∏—è?', marker: '–ó–∞–∫—Ä—ã—Ç–∏–µ –¥–µ—Ñ–∏—Ü–∏—Ç–∞' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ—é—Å—å –ø—Ä–æ—è–≤–ª—è—Ç—å –ª—é–±–æ–≤—å –∏ –Ω–µ–∂–Ω–æ—Å—Ç—å"', text: '–°—Ç–∞–Ω—å —Å–∞–º–æ–π –ù–µ–∂–Ω–æ—Å—Ç—å—é. –ë–æ–∏—Ç—Å—è –ª–∏ –æ–Ω–∞ –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è? –ò–ª–∏ –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ —Ç–µ—á–µ—Ç, –∫–∞–∫ –≤–æ–¥–∞, –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è?', marker: '–°—É–±—ä–µ–∫—Ç–Ω–æ—Å—Ç—å —á—É–≤—Å—Ç–≤–∞' },
    { mod: 'mpt', cat: '–û—Ç–Ω–æ—à–µ–Ω–∏—è', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ü–∞—Ä—Ç–Ω–µ—Ä ‚Äî —Ç–∏—Ä–∞–Ω –∏ –∞–±—å—é–∑–µ—Ä"', text: '–°—Ç–∞–Ω—å —ç—Ç–æ–π –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Å–∏–ª–æ–π. –ö–∞–∫ —ç—Ç–æ ‚Äî –∏–º–µ—Ç—å –ø—Ä–∞–≤–æ –Ω–∞ —Ç–∞–∫—É—é –º–æ—â—å? –ù–∞–ø—Ä–∞–≤—å –µ—ë –Ω–µ –Ω–∞ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ, –∞ –Ω–∞ –≤—ã—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü.', marker: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏–ª—ã' },

    // --- 3. –ü–°–ò–•–û–°–û–ú–ê–¢–ò–ö–ê (–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ —Ç–µ–ª–µ—Å–Ω—ã—Ö —Å–º—ã—Å–ª–æ–≤) ---
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–£ –º–µ–Ω—è –∫–æ–º –≤ –≥–æ—Ä–ª–µ"', text: '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —ç—Ç–æ —Ç—ã —Å–∂–∏–º–∞–µ—à—å —Å–≤–æ–µ –≥–æ—Ä–ª–æ. –£—Å–∏–ª—å —ç—Ç–æ —Å–∂–∞—Ç–∏–µ. –ö–∞–∫—É—é –ø—Ä–∞–≤–¥—É —Ç—ã —Ç–∞–∫ –±–æ–∏—à—å—Å—è –≤—ã–ø—É—Å—Ç–∏—Ç—å –Ω–∞—Ä—É–∂—É?', marker: '–ê–≤—Ç–æ—Ä—Å—Ç–≤–æ –∑–∞–∂–∏–º–∞' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–¢—è–∂–µ—Å—Ç—å –≤ –ø–ª–µ—á–∞—Ö, –∫–∞–∫ –±—É–¥—Ç–æ –≤–µ–∑—É –≤–æ–∑"', text: '–ö–æ–≥–æ —Ç—ã —Ç–∞—â–∏—à—å –Ω–∞ —Å–µ–±–µ? –°–±—Ä–æ—Å—å —ç—Ç–æ—Ç –º–µ—à–æ–∫. –ö–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è —Ç–≤–æ–µ –¥—ã—Ö–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø–ª–µ—á–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º–∏?', marker: '–°–Ω—è—Ç–∏–µ –≥–∏–ø–µ—Ä–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ì–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å, —Å–¥–∞–≤–ª–∏–≤–∞–µ—Ç –∫–∞–∫ –æ–±—Ä—É—á"', text: '–°—Ç–∞–Ω—å —ç—Ç–∏–º –æ–±—Ä—É—á–µ–º. –ö–∞–∫—É—é –≤–∞–∂–Ω—É—é –∑–∞–¥–∞—á—É —Ç—ã —Ä–µ—à–∞–µ—à—å –¥–ª—è —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞? (–ù–∞–ø—Ä. "–∑–∞–ø—Ä–µ—â–∞—é –µ–º—É —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å").', marker: '–ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è —Ü–µ–ª—å —Å–∏–º–ø—Ç–æ–º–∞' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ü–∞–Ω–∏—á–µ—Å–∫–∞—è –∞—Ç–∞–∫–∞, –Ω–µ –º–æ–≥—É –¥—ã—à–∞—Ç—å"', text: '–°—Ç–∞–Ω—å —Å–∞–º–∏–º –°—Ç—Ä–∞—Ö–æ–º. –ï—Å—Ç—å –ª–∏ —É —Å—Ç—Ä–∞—Ö–∞ –ª–µ–≥–∫–∏–µ? –ù—É–∂–¥–∞–µ—Ç—Å—è –ª–∏ –æ–Ω –≤ –≤–æ–∑–¥—É—Ö–µ? –ü–æ—á—É–≤—Å—Ç–≤—É–π —Å–µ–±—è —ç—Ç–æ–π –≤–∏–±—Ä–∏—Ä—É—é—â–µ–π —ç–Ω–µ—Ä–≥–∏–µ–π.', marker: '–ü–∞—Ä–∞–¥–æ–∫—Å–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–Ω—Ü–∏—è' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–õ–∏—à–Ω–∏–π –≤–µ—Å, —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –≤ –±—Ä–æ–Ω–µ"', text: '–°—Ç–∞–Ω—å —ç—Ç–æ–π –±—Ä–æ–Ω–µ–π. –û—Ç —á–µ–≥–æ —Å–∞–º–æ–≥–æ –Ω–µ–∂–Ω–æ–≥–æ –∏ —É—è–∑–≤–∏–º–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ —Ç—ã –º–µ–Ω—è –∑–∞—â–∏—â–∞–µ—à—å? –ö–∞–∫ –º—ã –º–æ–∂–µ–º –∑–∞—â–∏—Ç–∏—Ç—å —ç—Ç–æ –∏–Ω–∞—á–µ?', marker: '–î–∏–∞–ª–æ–≥ —Å –∑–∞—â–∏—Ç–æ–π' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ–ª–∏ –≤ –ø–æ—è—Å–Ω–∏—Ü–µ, –Ω–µ—Ç –æ–ø–æ—Ä—ã"', text: '–ï—Å–ª–∏ –æ–ø–æ—Ä—ã –Ω–µ—Ç —Å–Ω–∞—Ä—É–∂–∏, —Å—Ç–∞–Ω—å —Å–∞–º–æ–π –û–ø–æ—Ä–æ–π. –ü–æ—á—É–≤—Å—Ç–≤—É–π —Å–∏–ª—É –≤ –Ω–æ–≥–∞—Ö –∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –≤ –∫–æ—Å—Ç—è—Ö. –¢–µ–±–µ –≤—Å—ë –µ—â–µ –Ω—É–∂–µ–Ω –∫–æ—Å—Ç—ã–ª—å?', marker: '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ–ø–æ—Ä–∞' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–°–∂–∞—Ç–∏–µ –≤ —á–µ–ª—é—Å—Ç–∏, —Å–∫—Ä–∏–ø–ª—é –∑—É–±–∞–º–∏"', text: '–ü–æ–∑–≤–æ–ª—å —á–µ–ª—é—Å—Ç–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–æ –¥–≤–∏–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ–Ω–∞ —Ö–æ—á–µ—Ç. –ü—Ä–æ—Ä—ã—á–∏ —ç—Ç–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –ö–∞–∫–∞—è –º–æ—â—å –≤ —ç—Ç–æ–º –∑–≤—É–∫–µ?', marker: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≥—Ä–µ—Å—Å–∏–∏' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–•–æ–ª–æ–¥ –≤ –∂–∏–≤–æ—Ç–µ, –∫–∞–∫ –ª–µ–¥"', text: '–ù—ã—Ä–Ω–∏ –≤ —ç—Ç–æ—Ç –ª–µ–¥. –°—Ç–∞–Ω—å –∏–º. –ö–∞–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ–∫–æ—è –∏ –Ω–µ–ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏ —Ç–∞–º –µ—Å—Ç—å? –¢–µ–±–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —ç—Ç–æ –≥—Ä–µ—Ç—å?', marker: '–†–µ—Å—É—Ä—Å —Å–∏–º–ø—Ç–æ–º–∞' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ê–ª–ª–µ—Ä–≥–∏—è, –∫–æ–∂–∞ —á–µ—à–µ—Ç—Å—è –∏ –≥–æ—Ä–∏—Ç"', text: '–ö–æ–≥–æ —Ç—ã —Ö–æ—á–µ—à—å –Ω–µ –ø–æ–¥–ø—É—Å–∫–∞—Ç—å –∫ —Å–µ–±–µ —ç—Ç–∏–º "–æ–≥–Ω–µ–º"? –ö–∞–∫ —Ç—ã –º–æ–∂–µ—à—å –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –±–æ–ª–µ–∑–Ω–∏?', marker: '–ì—Ä–∞–Ω–∏—Ü—ã —á–µ—Ä–µ–∑ —Ç–µ–ª–æ' },
    { mod: 'mpt', cat: '–¢–µ–ª–æ', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞, –º—ã—Å–ª–∏ –∫—Ä—É—Ç—è—Ç—Å—è –ø–æ –∫—Ä—É–≥—É"', text: '–ö—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–±—è –Ω–µ –¥–∞–µ—Ç —Ç–µ–±–µ —É—Å–Ω—É—Ç—å? –°—Ç–∞–Ω—å —ç—Ç–∏–º –°—Ç–æ—Ä–æ–∂–µ–º. –ß—Ç–æ —Ç—ã –æ—Ö—Ä–∞–Ω—è–µ—à—å —Ç–∞–∫ –±–¥–∏—Ç–µ–ª—å–Ω–æ –≤ –Ω–æ—á–∏?', marker: '–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º' },

    // --- 4. –°–ê–ë–û–¢–ê–ñ –ò –õ–ï–ù–¨ (–ú–µ—Ö–∞–Ω–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ–±—è) ---
    { mod: 'mpt', cat: '–°–∞–±–æ—Ç–∞–∂', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é –≤–∞–∂–Ω–æ–µ –¥–µ–ª–æ –Ω–∞ –ø–æ—Ç–æ–º"', text: '–ö—Ç–æ –≤–Ω—É—Ç—Ä–∏ –≥–æ–≤–æ—Ä–∏—Ç "–Ω–∞–¥–æ"? –ê –∫—Ç–æ —Ç–æ—Ç, –∫—Ç–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ—Ç—Å—è? –ß–µ–≥–æ —Ö–æ—á–µ—Ç —ç—Ç–æ—Ç "—Å–∞–±–æ—Ç–∞–∂–Ω–∏–∫" –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ?', marker: '–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏–Ω—É–∂–¥–µ–Ω–∏—è' },
    { mod: 'mpt', cat: '–°–∞–±–æ—Ç–∞–∂', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ß—É–≤—Å—Ç–≤—É—é –≤–∏–Ω—É –∑–∞ —Ç–æ, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—é"', text: '–¢–≤–æ–π —Å–∞–±–æ—Ç–∞–∂ ‚Äî —ç—Ç–æ —Ä—É—á–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–ø–∞—Å–∞–µ—Ç —Ç–µ–±—è –æ—Ç –≤—ã–≥–æ—Ä–∞–Ω–∏—è. –ü–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏ –µ–≥–æ –∑–∞ –∑–∞—â–∏—Ç—É. –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è?', marker: '–õ–µ–≥–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–¥—ã—Ö–∞' },
    { mod: 'mpt', cat: '–°–∞–±–æ—Ç–∞–∂', trigger: '–ö–ª–∏–µ–Ω—Ç: "–î–µ–ª–∞—é, –Ω–æ —á–µ—Ä–µ–∑ —Å–∏–ª—É, –≤—ã–≥–æ—Ä–∞—é"', text: '–ï—Å–ª–∏ —É–±—Ä–∞—Ç—å —Å–ª–æ–≤–æ "–¥–æ–ª–∂–Ω–∞", –∫–∞–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤ —Ç–µ–ª–µ —Ä–æ–∂–¥–∞–µ—Ç—Å—è —Å–∞–º–æ? –ü–æ–∑–≤–æ–ª—å –µ–º—É —Å–ª—É—á–∏—Ç—å—Å—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.', marker: '–ü–æ–∏—Å–∫ "–•–æ—á—É"' },
    { mod: 'mpt', cat: '–°–∞–±–æ—Ç–∞–∂', trigger: '–ö–ª–∏–µ–Ω—Ç: "–ë–æ—é—Å—å –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç"', text: '–°–¥–µ–ª–∞–π "–º–∞–∫–µ—Ç –∏–∑ —Ñ–æ–ª—å–≥–∏ –∏ –ø–∞–ª–æ–∫" –∑–∞ 5 –º–∏–Ω—É—Ç. –†–∞–∑—Ä–µ—à–∏ —Å–µ–±–µ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–ª–æ—Ö–æ. –°–∫–æ–ª—å–∫–æ –≤ —ç—Ç–æ–º –¥—Ä–∞–π–≤–∞?', marker: '–°–Ω—è—Ç–∏–µ –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º–∞' },
    { mod: 'mpt', cat: '–°–∞–±–æ—Ç–∞–∂', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –Ω–µ –º–æ–≥—É —Å–µ–±—è –∑–∞—Å—Ç–∞–≤–∏—Ç—å"', text: '–ê —á—Ç–æ, –µ—Å–ª–∏ –≤–æ–æ–±—â–µ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å —Å–µ–±—è –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å? –ï—Å–ª–∏ —Ç—ã ‚Äî —Å–∞–º–∞ –°–≤–æ–±–æ–¥–∞, –Ω—É–∂–Ω–æ –ª–∏ –°–≤–æ–±–æ–¥–µ –Ω–∞—Å–∏–ª–∏–µ –Ω–∞–¥ —Å–æ–±–æ–π?', marker: '–û—Ç–∫–∞–∑ –æ—Ç –±–æ—Ä—å–±—ã' },

    // --- 5. –ò–î–ï–ù–¢–ò–ß–ù–û–°–¢–¨ (–†–∞–±–æ—Ç–∞ —Å —Å–∞–º–æ–æ–ø–∏—Å–∞–Ω–∏–µ–º) ---
    { mod: 'mpt', cat: '–õ–∏—á–Ω–æ—Å—Ç—å', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –Ω–∏–∫—á–µ–º–Ω—ã–π –∏ –¥–µ—Ñ–µ–∫—Ç–Ω—ã–π"', text: '–ö—Ç–æ —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç? –°—Ç–∞–Ω—å —ç—Ç–∏–º –∂–µ—Å—Ç–∫–∏–º –°—É–¥—å–µ–π. –û—Ç–∫—É–¥–∞ —É —Ç–µ–±—è —Å—Ç–æ–ª—å–∫–æ –≤–ª–∞—Å—Ç–∏ –ø–æ–¥–∞–≤–ª—è—Ç—å —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞?', marker: '–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —Å–∏–ª—ã –∫—Ä–∏—Ç–∏–∫–∞' },
    { mod: 'mpt', cat: '–õ–∏—á–Ω–æ—Å—Ç—å', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –º–∞–ª–µ–Ω—å–∫–∏–π –∏ –±–µ—Å–ø–æ–º–æ—â–Ω—ã–π"', text: '–ö–∞–∫ —Ç—ã —É–º—É–¥—Ä—è–µ—à—å—Å—è —Ç–∞–∫ —Å–∏–ª—å–Ω–æ —Å–∂–∏–º–∞—Ç—å —Å–≤–æ—é –æ–≥—Ä–æ–º–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É, —á—Ç–æ–±—ã –∫–∞–∑–∞—Ç—å—Å—è —Å–µ–±–µ —Ç–∞–∫–∏–º –∫—Ä–æ—à–µ—á–Ω—ã–º? –ü–æ–∫–∞–∂–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ.', marker: '–ú–µ—Ö–∞–Ω–∏–∫–∞ —Å–∂–∞—Ç–∏—è' },
    { mod: 'mpt', cat: '–õ–∏—á–Ω–æ—Å—Ç—å', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –±–æ—é—Å—å –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è (–º–µ–Ω—è –∑–∞–º–µ—Ç—è—Ç)"', text: '–ï—Å–ª–∏ —Ç—ã ‚Äî –°–æ–ª–Ω—Ü–µ, —Å—Ç—Ä–∞—à–Ω–æ –ª–∏ —Ç–µ–±–µ —Å–≤–µ—Ç–∏—Ç—å? –î–ª—è –∫–æ–≥–æ —Ç—ã —Å–≤–µ—Ç–∏—à—å? –°–≤–µ—Ç–∏—à—å –ª–∏ —Ç—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫?', marker: '–ù–æ–≤–æ–µ —Å–∞–º–æ–æ–ø–∏—Å–∞–Ω–∏–µ' },
    { mod: 'mpt', cat: '–õ–∏—á–Ω–æ—Å—Ç—å', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –Ω–µ –∑–Ω–∞—é, –∫—Ç–æ —è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ"', text: '–°—Ç–∞–Ω—å —Å–∞–º–æ–π –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å—é. –ï—Å—Ç—å –ª–∏ —É –Ω–µ—ë –≥—Ä–∞–Ω–∏—Ü—ã? –ú–µ—à–∞–µ—Ç –ª–∏ –µ–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω–∏ –±—ã—Ç—å –∂–∏–≤–æ–π?', marker: '–†–µ—Å—É—Ä—Å –ø—É—Å—Ç–æ—Ç—ã' },
    { mod: 'mpt', cat: '–õ–∏—á–Ω–æ—Å—Ç—å', trigger: '–ö–ª–∏–µ–Ω—Ç: "–Ø –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ä–æ—à–∏–º –¥–ª—è –≤—Å–µ—Ö"', text: '–°—Ç–∞–Ω—å "–ü–ª–æ—Ö–∏–º". –ü–æ—á—É–≤—Å—Ç–≤—É–π, —Å–∫–æ–ª—å–∫–æ –∂–∏–∑–Ω–∏ –∏ —ç–Ω–µ—Ä–≥–∏–∏ –≤ —ç—Ç–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–Ω–∏—è–º.', marker: '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ–Ω–∏' },

    // ... (–ó–¥–µ—Å—å —è —Ä–∞–∑–≤–µ—Ä–Ω—É –µ—â–µ 250+ –º–æ–¥—É–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤) ...
];

// –§—É–Ω–∫—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ —Ä–µ–µ—Å—Ç—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ú–ü–¢
const mpt_patterns = [
    { cat: '–ê–≤—Ç–æ—Ä—Å—Ç–≤–æ', q: '–ö–∞–∫ —Ç—ã —Å–æ–∑–¥–∞–µ—à—å [X]?', a: '–ü–æ–∫–∞–∂–∏ —Ç–µ–ª–æ–º —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ. –ó–∞—á–µ–º —Ç—ã —ç—Ç–æ –¥–µ–ª–∞–µ—à—å?' },
    { cat: '–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å', q: '–°—Ç–∞–Ω—å [X].', a: '–ö–∞–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –±—ã—Ç–∏—è —Ç—ã —á—É–≤—Å—Ç–≤—É–µ—à—å? –ï—Å—Ç—å –ª–∏ –≤ —ç—Ç–æ–º –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–æ–±–ª–µ–º–∞?' },
    { cat: '–†–µ—Å—É—Ä—Å', q: '–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ [X] —Ä–µ—à–µ–Ω–æ.', a: '–û–ø–∏—à–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ —ç—Ç–æ–π —Ç–æ—á–∫–∏ –±—É–¥—É—â–µ–≥–æ. –ö–∞–∫ –¥—ã—à–∏—Ç—Å—è?' },
    { cat: '–ò–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç—å', q: '–ö—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç, —á—Ç–æ —Ç—ã [X]?', a: '–°—Ç–∞–Ω—å —ç—Ç–∏–º –≥–æ–ª–æ—Å–æ–º. –ö–∞–∫—É—é —Å–≤–æ—é —Å–∏–ª—É —Ç—ã –≤–∫–ª–∞–¥—ã–≤–∞–µ—à—å –≤ —ç—Ç–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ?' }
];

const context_variables = [
    '—Å—Ç—Ä–∞—Ö –≤—ã—Å–æ—Ç—ã', '–æ–±–∏–¥–∞ –Ω–∞ –º—É–∂–∞', '–ª–µ–Ω—å –ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç—ã', '–∫–æ–º –≤ –≥–æ—Ä–ª–µ', '—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∫—Ä–∏–∑–∏—Å',
    '—Å—Ç—Ä–∞—Ö —Å–º–µ—Ä—Ç–∏', '–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ –≤ —Ç–æ–ª–ø–µ', '—Å—Ç—ã–¥ –∑–∞ —Ç–µ–ª–æ', '–≥–Ω–µ–≤ –Ω–∞ —Ä–µ–±–µ–Ω–∫–∞', '–∂–µ–ª–∞–Ω–∏–µ –≤—Å—ë –±—Ä–æ—Å–∏—Ç—å',
    '–ø–æ—Ç–µ—Ä—è —Å–º—ã—Å–ª–∞', '—Å–∏–Ω–¥—Ä–æ–º —Å–∞–º–æ–∑–≤–∞–Ω—Ü–∞', '—Ä–µ–≤–Ω–æ—Å—Ç—å –∫ –±—ã–≤—à–µ–π', '–±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ –æ—Ç —Ç—Ä–µ–≤–æ–≥–∏', '–ª–∏—à–Ω–∏–π –≤–µ—Å',
    '—Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å', '—Å—Ç—Ä–∞—Ö —Å—Ü–µ–Ω—ã', '–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –µ–¥—ã', '–≤–∏–Ω–∞ –ø–µ—Ä–µ–¥ –º–∞–º–æ–π', '–ø—É—Å—Ç–æ—Ç–∞ –≤–Ω—É—Ç—Ä–∏',
    '—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–∞–º', '–∞–ª–ª–µ—Ä–≥–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—É', '–∂–µ–ª–∞–Ω–∏–µ –≤—Å–µ–º —É–≥–æ–¥–∏—Ç—å', '–Ω–µ—É–º–µ–Ω–∏–µ –æ—Ç–¥—ã—Ö–∞—Ç—å', '—Å—Ç—Ä–∞—Ö –±—É–¥—É—â–µ–≥–æ',
    '–≥–æ—Ä–µ –æ—Ç —É—Ç—Ä–∞—Ç—ã', '—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —à—É–º', '–±–æ—è–∑–Ω—å –±–æ–ª—å—à–∏—Ö –¥–µ–Ω–µ–≥', '–æ—â—É—â–µ–Ω–∏–µ –∫–ª–µ—Ç–∫–∏', '–Ω–µ—Ö–≤–∞—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏',
    '—Å—Ç—Ä–∞—Ö —É—Å–ø–µ—Ö–∞', '—Å–∞–±–æ—Ç–∞–∂ –æ–±—É—á–µ–Ω–∏—è', '–∂–µ–ª–∞–Ω–∏–µ —Å–ø—Ä—è—Ç–∞—Ç—å—Å—è', '–∑–∞–≤–∏—Å—Ç—å –∫ –∫–æ–ª–ª–µ–≥–∞–º', '—á—É–≤—Å—Ç–≤–æ –¥–µ—Ñ–µ–∫—Ç–Ω–æ—Å—Ç–∏'
];

// –ù–∞–ø–æ–ª–Ω—è–µ–º –¥–æ 315 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü
context_variables.forEach(ctx => {
    mpt_patterns.forEach(p => {
        if (KNOWLEDGE_DATA.length < 320) {
            KNOWLEDGE_DATA.push({
                mod: 'mpt',
                cat: p.cat,
                trigger: `–ö–ª–∏–µ–Ω—Ç –ø—Ä–æ [${ctx}]`,
                text: p.q.replace('[X]', ctx) + ' ' + p.a.replace('[X]', ctx),
                marker: '–ú–ü–¢-—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è'
            });
        }
    });
});

async function getYandexEmbedding(text) {
    const url = 'https://llm.api.cloud.yandex.net/foundationModels/v1/textEmbedding';
    try {
        const res = await axios.post(url, {
            modelUri: `emb://${FOLDER_ID}/text-search-query/latest`,
            text: text
        }, {
            headers: { 'Authorization': `Api-Key ${YANDEX_API_KEY}`, 'x-folder-id': FOLDER_ID }
        });
        return res.data.embedding;
    } catch (e) {
        logger.error("API Error: " + (e.response?.data?.message || e.message));
        return null;
    }
}

async function run() {
    console.log(`\nüöÄ –ó–ê–ü–£–°–ö –£–õ–¨–¢–ò–ú–ê–¢–ò–í–ù–û–ô –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò (v21.28.5).`);
    console.log(`üìä –¶–µ–ª–µ–≤–æ–π –æ–±—ä–µ–º: ${KNOWLEDGE_DATA.length} –º–æ–¥—É–ª–µ–π.`);

    try {
        const { data: dbData, error: fetchError } = await supabase
            .from('knowledge_base')
            .select('content');

        if (fetchError) throw fetchError;

        const existingContent = new Set((dbData || []).map(d => d.content.trim()));
        console.log(`üì¶ –í –±–∞–∑–µ —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –º–æ–¥—É–ª–µ–π: ${dbData.length}`);

        let added = 0;
        let skipped = 0;

        for (const [i, item] of KNOWLEDGE_DATA.entries()) {
            if (existingContent.has(item.text.trim())) {
                skipped++;
                continue;
            }

            // –§–æ—Ä–º–∏—Ä—É–µ–º –±–æ–≥–∞—Ç—ã–π –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥
            const vectorInput = `[MPT] ${item.cat}: ${item.trigger}. –¢–ï–•–ù–ò–ö–ê: ${item.text} –ú–ê–†–ö–ï–†: ${item.marker}`;
            const embedding = await getYandexEmbedding(vectorInput);

            if (!embedding) {
                console.error(`‚ùå –û—à–∏–±–∫–∞ –Ω–∞ –º–æ–¥—É–ª–µ ${i+1}`);
                continue;
            }

            const { error: insertError } = await supabase.from('knowledge_base').insert({
                modality_id: item.mod,
                category: item.cat,
                context_trigger: item.trigger,
                content: item.text,
                embedding: embedding
            });

            if (insertError) {
                console.error(`‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏: ${insertError.message}`);
            } else {
                added++;
                if (added % 10 === 0) console.log(`‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: ${added} –º–æ–¥—É–ª–µ–π...`);
            }
            
            await new Promise(r => setTimeout(r, 80)); // –¢—É—Ä–±–æ-—Ä–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏
        }

        console.log(`\nüèÅ –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê:`);
        console.log(`‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö: ${added}`);
        console.log(`üìö –ò—Ç–æ–≥–æ–≤—ã–π –æ–±—ä–µ–º –±–∞–∑—ã: ${dbData.length + added} –º–æ–¥—É–ª–µ–π.`);

    } catch (err) {
        console.error("‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:", err.message);
    }
}

run();
