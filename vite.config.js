import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

/**
 * VITE.CONFIG.JS - v21.25 (PLATINUM EDITION)
 * ========================================================
 * üöÄ –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ Connectum Pro Platinum.
 * üõ†Ô∏è –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Render –∏ VPS.
 */

export default defineConfig({
  plugins: [react()],
  root: '.', // –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞
  publicDir: 'public', // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
  
  build: {
    outDir: 'dist', // –ü–∞–ø–∫–∞ –¥–ª—è –∏—Ç–æ–≥–æ–≤–æ–π —Å–±–æ—Ä–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º)
    emptyOutDir: true,
    assetsDir: 'assets', // –ü–æ–¥–ø–∞–ø–∫–∞ –¥–ª—è JS/CSS –∞—Å—Å–µ—Ç–æ–≤
    rollupOptions: {
      input: {
        main: './index.html',
      },
    },
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –±–∞–Ω–¥–ª–∞—Ö
    chunkSizeWarningLimit: 1000,
  },

  server: {
    port: 5173,
    // --- üõ°Ô∏è DEVELOPMENT PROXY ---
    // –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ /api/chat –±–µ–∑ CORS –æ—à–∏–±–æ–∫ –ª–æ–∫–∞–ª—å–Ω–æ
    proxy: {
      '/api': {
        target: 'http://localhost:3000',
        changeOrigin: true,
        secure: false,
      },
    },
  },

  // –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å. '/' –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö–æ—Å—Ç–∏–Ω–≥–æ–≤.
  base: '/', 
});
